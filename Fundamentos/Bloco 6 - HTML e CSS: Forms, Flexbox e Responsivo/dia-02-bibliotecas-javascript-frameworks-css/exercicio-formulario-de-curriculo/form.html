<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma-rtl.min.css">
  <link rel="stylesheet" href="./node_modules/just-validate/dist/css/justValidateTooltip.min.css">
  <link rel="stylesheet" href="style.css">
  <title>Formulário de Cadastro de Curriculo</title>
</head>
<body class="container is-four-fifths">
  <h1 class="title is-3">Cadastro de Curriculo</h1>
  <div class="col-md-6 center-block no-float mt30">
    <form method="GET" class="js-form form">
      <fieldset class="block">
        <div class="row">
          <div class="form-group col-md-6">
            <label for="name-1">Nome: <input type="text" maxlength="40" id="name-1" required class="form__input form-control" data-validate-field = "name"></label>
          </div>
          <div class="form-group col-md-6">
            <label for="email">Email: <input type="text" maxlength="50" required id="email" class="form__input form-control"></label><br><br>
          </div>
          <div class="form-group col-md-6">
            <label for="cpf">CPF:<input type="text" maxlength="11" required id="cpf" class="form__input form-control"></label><br><br>
          </div>
          <div class="form-group col-md-6">
            <label for="endereco">Endereço: <input type="text" maxlength="200" required id="endereco" class="form__input form-control"></label>
          </div>
            <label for="cidade">Cidade: <input type="text" maxlength="28" required id="cidade" class="form__input form-control"></label>
          <div class="form-group col-md-6">
            <label for="select-state">Estado: <select name="estado" id="select-state" required ></select><label><br><br>
          </div>
        </div>
        <p id="moradia">Tipo de moradia:</p>
        <label for="tipo-casa">Casa<input type="radio" required id="tipo-casa" name="tipo-moradia" value="Casa"   checked class="radio"></label>
        <label for="tipo-ap">Apartamento<input type="radio" required id="tipo-ap" name="tipo-moradia"   value="Apartamento" class="radio"></label>
      </fieldset>
      <fieldset class="block">
        <label for="resumo">Resumo do Curriculo:
          <div class="control">
            <textarea name="resumo-curriculo" id="resumo" maxlength="1000" required class="textarea is-small  is-primary">
            </textarea>
          </div>
        </label><br> 
        <label for="cargo">Cargo: <input type="text" name="ultimo-cargo" maxlength="40" id="cargo"></ label><br><br>
        <label for="descricao-cargo">Descrição do Cargo:<input type="text" name="descricao" id="descricao-cargo"  required maxlength="500"></label><br><br>
        <label for="datepicker">Data de inicio:<input type="text" name="data" id="datepicker" required  maxlength="8" autocomplete="off"></label>
      </fieldset>
      <button type="submit" id="enviar-dados" class="form__btn btn btn-primary">Enviar Curriculo</button>
      <button type="reset" id="reseta-dados">Resetar Dados</button>
    </form>
  </div>
  <div id="consolidado">
  </div>
  <script src="script.js"></script>
  <script src="./node_modules/just-validate/dist/js/just-validate.js"></script>
  <script>
    new window.JustValidate('.js-form', {
        rules: {
            radio: {
                required: true
            },
            checkbox: {
                required: true
            },
            checkbox2: {
                required: true
            },
            email: {
                required: true,
                email: true,
            }
        },

        focusWrongField: true,

        submitHandler: function (form, values, ajax) {
            ajax({
                url: 'https://just-validate-api.herokuapp.com/submit',
                method: 'POST',
                data: values,
                async: true,
                callback: function (response) {
                    alert('AJAX submit successful! \nResponse from server:' + response)
                },
                error: function (response) {
                    alert('AJAX submit error! \nResponse from server:' + response)
                }
            });
        },
        
        invalidFormCallback: function (errors) {
            console.log(errors);
        },
    });

    new window.JustValidate('.js-form-2', {
            rules: {
                email: {
                    required: true,
                    email: true,
                    remote: {
                        url: 'https://just-validate-api.herokuapp.com/check-correct',
                        sendParam: 'email',
                        successAnswer: 'OK',
                        method: 'GET'
                    }
                },
                login: {
                    required: true,
                    remote: {
                        url: 'https://just-validate-api.herokuapp.com/check-correct',
                        sendParam: 'login',
                        successAnswer: 'OK',
                        method: 'GET'
                    }
                }
            },
            messages: {
                email: {
                    remote: 'Email already exist',
                    email: 'Email not valid!'
                },
                login: {
                    remote: 'Login already exist',
                    required: 'Login is required!'
                }
            },
        }
    );
  </script>
  <script>
    const picker = new Pikaday({
        field: document.getElementById('datepicker'),
        format: 'DD/MM/YYYY',
        minDate: new Date(1985, 01, 01),
        maxDate: new Date(2021, 12, 31),
        yearRange: [1980,2021],
        toString(date, format) {
            // you should do formatting based on the passed format,
            // but we will just return 'D/M/YYYY' for simplicity
            const day = date.getDate();
            const month = date.getMonth() + 1;
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        },
        parse(dateString, format) {
            // dateString is the result of `toString` method
            const parts = dateString.split('/');
            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1], 10) - 1;
            const year = parseInt(parts[2], 10);
            return new Date(year, month, day);
        }
    });
  </script>
</body>
</html>